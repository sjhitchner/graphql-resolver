{{ define "imports" }}
import (
{{- range $import := . }}
	"{{ $import }}"
{{- end -}}
{{ end }}


{{ define "interface" }}
type {{ .Name }} interface {
{{- range $method := .Methods -}}
	{{ $method.Name }}(ctx context.Context
{{ range $arg := $method.Args -}}
, {{ $arg.Name }} {{ $arg.Type }}
{{- end -}}
) ({{ $method.Return }}, error)
{{- end -}}
}
{{ end }}

{{ define "struct" }}
type {{ .Name }} struct {
{{- range $field := .Fields -}}
	{{ $field.Name }} {{ $field.Type }} `json:"{{ $field.JSONTag }}"`
{{- end -}}
}

func (t *{{ .Name }}) String() string {
	b, err := json.MarshalIndent(t, "", "  ")
	if err != nil {
		return err.Error()
	}
	return string(b)
}
{{ end }}
